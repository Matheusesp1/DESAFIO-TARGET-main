<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema Completo</title>
<style>
body { font-family: Arial; padding: 20px; background: #f4f4f4; }
h2 { background: #333; color: white; padding: 10px; }
section { background: white; padding: 15px; margin: 20px 0; border-radius: 8px; }
button { padding: 8px 15px; margin-top: 10px; cursor: pointer; }
input { padding: 5px; width: 200px; }
</style>
</head>
<body>

<h1>Sistema Comercial – Comissões, Estoque e Juros</h1>

<!-- Comissões -->
<section>
<h2>1. Calcular Comissões</h2>
<button onclick="buscarComissoes()">Calcular</button>
<pre id="resultadoComissoes"></pre>
</section>

<!-- Estoque -->
<section>
<h2>2. Movimentação de Estoque</h2>

<label>Código do Produto:</label><br>
<input id="codigo" type="number"><br><br>

<label>Quantidade (use negativo para saída):</label><br>
<input id="quantidade" type="number"><br><br>

<label>Descrição:</label><br>
<input id="descricao"><br><br>

<button onclick="movimentar()">Movimentar</button>
<pre id="resultadoEstoque"></pre>
</section>

<!-- Juros -->
<section>
<h2>3. Calcular Juros</h2>

<label>Valor:</label><br>
<input id="valor" type="number"><br><br>

<label>Data de Vencimento:</label><br>
<input id="vencimento" type="date"><br><br>

<button onclick="calcularJuros()">Calcular Juros</button>
<pre id="resultadoJuros"></pre>
</section>

<script>
const API = "http://localhost:3000";

// 1 - Comissões
function buscarComissoes() {
  fetch(API + "/comissoes")
    .then(res => res.json())
    .then(data => {
      document.getElementById("resultadoComissoes").textContent =
        JSON.stringify(data, null, 2);
    });
}

// 2 - Estoque
function movimentar() {
  const body = {
    codigoProduto: Number(document.getElementById("codigo").value),
    quantidade: Number(document.getElementById("quantidade").value),
    descricao: document.getElementById("descricao").value
  };

  fetch(API + "/movimentar-estoque", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(body)
  })
  .then(res => res.json())
  .then(data => {
    document.getElementById("resultadoEstoque").textContent =
      JSON.stringify(data, null, 2);
  });
}

// 3 - Juros
function calcularJuros() {
  const body = {
    valor: Number(document.getElementById("valor").value),
    dataVencimento: document.getElementById("vencimento").value
  };

  fetch(API + "/juros", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(body)
  })
  .then(res => res.json())
  .then(data => {
    document.getElementById("resultadoJuros").textContent =
      JSON.stringify(data, null, 2);
  });
}
</script>

</body>
</html>
